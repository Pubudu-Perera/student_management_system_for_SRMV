<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- bootstrap 5 -->
    <link rel="stylesheet" href="Resources/Bootstrap%205/bootstrap-5.0.2-dist/css/bootstrap.min.css"/>
    <script src="Resources/Bootstrap%205/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>

    <!-- Font awesome -->
    <link rel="stylesheet" href="Resources/font-awesome/font-awesome/css/all.css"/>

    <!-- Jquery -->
    <script src="Resources/JQuery/JQuery.js"></script>

    <!--     Jquery data tables -->
    <link rel="stylesheet" href="Resources/JQuery/DataTables-1.12.1/css/jquery.dataTables.min.css">
    <script src="Resources/JQuery/DataTables-1.12.1/js/jquery.dataTables.min.js"></script>

    <!-- css -->
    <link rel="stylesheet" href="style.css"/>

    <!-- Js -->
    <script src="Student.js"></script>

    <!-- common js functions -->
    <script src="Resources/script/common.js"></script>

    <!-- title bar icon-->
    <link rel="icon" href="Resources/Images/logo.jpg"/>


    <title>Student Management</title>

</head>

<body>



<div class="container-fluid">

    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: rgb(115,20,18);color: var(--secondary-color)">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="Index.html" style="color: rgb(254,241,4);">DASHBOARD</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>


            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav">
                    <li class="nav-item ms-lg-5 dropdown mt-1">
                        <a class="nav-link dropdown-toggle fw-bold" href="#" id="navbarDropdownStudent" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: rgb(254,241,4);">
                            Student
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownStudent">
                            <li><a class="dropdown-item" href="/guardian">Guardian Registration</a></li>
                            <li><a class="dropdown-item" href="/student">Student Registration</a></li>
                            <li><a class="dropdown-item" href="/student_registration">Assign Students to classroom</a></li>
                        </ul>
                    </li>

                    <li class="nav-item ms-lg-5 dropdown mt-1">
                        <a class="nav-link dropdown-toggle fw-bold" href="#" id="navbarDropdownAca" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: rgb(254,241,4);">
                            Academic Year & Events
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownAca" style="background-color: rgb(115,20,18);">
                            <li><a class="dropdown-item" href="/academic_year" style="color: var(--secondary-color);">Academic Year & Events</a></li>
                            <li><a class="dropdown-item" href="/classroom">Classroom management</a></li>
                        </ul>
                    </li>

                    <li class="nav-item ms-lg-5 dropdown mt-1">
                        <a class="nav-link dropdown-toggle fw-bold" href="#" id="navbarDropdownExam" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: rgb(254,241,4);">
                            Examination
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownExam" style="background-color: rgb(115,20,18);">
                            <li><a class="dropdown-item" href="/exam">Exams</a></li>
                            <li><a class="dropdown-item" href="/exam_results">Exam Results</a></li>
                        </ul>
                    </li>

                    <li class="nav-item ms-lg-5 mt-1">
                        <a class="nav-link active fw-bold" aria-current="page" href="/attendance" style="color: rgb(254,241,4);">Attendance</a>
                    </li>

                    <li class="nav-item ms-lg-5 dropdown mt-1">
                        <a class="nav-link dropdown-toggle fw-bold" href="#" id="navbarDropdownEmployee" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: rgb(254,241,4);">
                            Employee
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownEmployee" style="background-color: rgb(115,20,18);">
                            <li><a class="dropdown-item" href="/employee">Employee Registration</a></li>
                            <li><a class="dropdown-item" href="/teacher">Teacher Registration</a></li>
                        </ul>
                    </li>

                    <li class="nav-item ms-lg-5 mt-1" >
                        <a class="nav-link fw-bold" href="/payment" style="color: rgb(254,241,4);">Payments</a>
                    </li>

                    <li class="nav-item ms-lg-5 dropdown mt-1">
                        <a class="nav-link dropdown-toggle fw-bold" href="#" id="navbarDropdownAdministration" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: rgb(254,241,4);">
                            Administration
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownAdministration" style="background-color: rgb(115,20,18);">
                            <li><a class="dropdown-item" href="/user">User Management</a></li>
                            <li><a class="dropdown-item" href="/privilege">Privilege Management</a></li>
                        </ul>
                    </li>

                    <li class="nav-item ms-lg-5 dropdown mt-1">
                        <a class="nav-link dropdown-toggle fw-bold" href="#" id="navbarReports" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: rgb(254,241,4);">
                            Reports
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarReports" style="background-color: rgb(115,20,18);">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>

                </ul>
            </div>
        </div>
    </nav>

    <div class="row">
        <div class="col">

            <div class="card" style="height: 200vh;">
                <div class="card-header">
                    <h1 class="h1">Student Management</h1>
                </div>

                <div class="card-body">

                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs justify-content-end" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="form-tab" data-bs-toggle="tab"
                                    data-bs-target="#form" type="button" role="tab" aria-controls="form"
                                    aria-selected="true">
                                Student Registration Form
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="table-tab" data-bs-toggle="tab" data-bs-target="#table"
                                    type="button" role="tab" aria-controls="table" aria-selected="false">
                                Student Table
                            </button>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">


                        <!-- form area -->
                        <div class="tab-pane active" id="form" role="tabpanel" aria-labelledby="form-tab"
                             tabindex="0" style="height:auto ;">

                            <form onsubmit="return false">

                                <!-- Required -->
                                <div class="row mt-3">
                                    <div class="col">
                                    <p style="text-align: right; font-weight: bold;"><span
                                            style="color:red;">*</span>Required </p>
                                    </div>
                                </div>


                                <!-- Accordion + Student form content -->
                                <div class="row mb-5">

                                    <!-- Guardian-->
                                    <div class="row mb-4">

                                        <div class="col-8"></div>

                                        <!-- Guardian-->
                                        <div class="col-4">

                                            <label for="selectInputGuardian" class="form-label">Guardian :<span
                                                    style="color: red;">*</span></label>
                                            <input type="text" list="guardianDataList" placeholder="search & select the guardian" class="form-control" id="selectInputGuardian"
                                            onchange="dataListValidator(selectInputGuardian,'','new_student','guardian_id','old_student','student_guardians','full_name',showGuardian,'full_name')"
                                            onkeyup="dataListValidator(selectInputGuardian,'','new_student','guardian_id','old_student','student_guardians','full_name',showGuardian,'full_name')">
                                            <datalist id="guardianDataList">

                                            </datalist>

                                            <div class="form-text" id="showGuardian">Guardian is</div>
                                        </div>
                                    </div>


                                    <!-- Student full name + name with initials + calling name-->
                                    <div class="row mb-4">

                                        <!-- Full name -->
                                        <div class="col-6">
                                            <label for="textFullName" class="form-label">Student's
                                                Full
                                                Name :
                                                <span style="color: red;">*</span> </label>
                                            <input type="text" class="form-control"
                                                   id="textFullName"
                                                   placeholder="Enter Student's Full Name"
                                                   onkeyup="textValidator(textFullName,'^[A-Z][A-Za-z]{4,}(?: [a-zA-Z]+){0,15}$','new_student','full_name','old_student');"
                                                   required>
                                        </div>

                                        <!-- Name with initials -->
                                        <div class="col-3">
                                            <label for="textInitials"
                                                   class="form-label">Name
                                                with
                                                Initials
                                                :
                                                <span style="color: red;">*</span> </label>
                                            <input type="text" class="form-control"
                                                   id="textInitials"
                                                   placeholder="Student's Name with Initials"
                                                   onkeyup="textValidator(textInitials,'^[#.a-zA-Z\s,-\\\/ \n]+$','new_student','name_with_initials','old_student');"
                                                   required>
                                        </div>

                                        <!-- Calling name -->
                                        <div class="col-3">
                                            <label for="textCallingName" class="form-label">
                                                Calling Name : <span style="color: red;">*</span>
                                            </label>
                                            <input type="text" class="form-control"
                                                   id="textCallingName"
                                                   placeholder="Student's Calling Name"
                                                   onkeyup="textValidator(textCallingName,'^[A-Z][a-z]{2,30}$','new_student','calling_name','old_student')"
                                                   required>
                                        </div>
                                    </div>


                                    <!--  NIC + DOB + gender -->
                                    <div class="row mb-4">

                                        <!-- NIC -->
                                        <div class="col-4">
                                            <label for="textNIC" class="form-label">NIC : </label>
                                            <input type="text" class="form-control"
                                                   id="textNIC"
                                                   placeholder="Enter Student's NIC Number"
                                                   onkeyup="textValidator(textNIC,'^([0-9]{9}[x|X|v|V]|[0-9]{12})$','new_student','nic','old_student'); genderThroughNIC(); dobThroughNIC()">
                                        </div>

                                        <!-- DOB -->
                                        <div class="col-4">
                                            <label for="dateDOB" class="form-label">Date of Birth :
                                                <span style="color: red;">*</span> </label>
                                            <input type="date" class="form-control" id="dateDOB"
                                                   placeholder=""
                                                   onchange="dateValidator(dateDOB,'new_student','date_of_birth','old_student')"
                                                   required>
                                        </div>

                                        <!-- Gender -->
                                        <div class="col-4">
                                            <label class="form-label">Gender :
                                                <span style="color: red;">*</span></label><br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio"
                                                       name="gender" id="genderMale" value="Male"
                                                       onchange="radioValidator(genderMale,'new_student','gender','old_student','label_male','label_female');">
                                                <label class="form-check-label"
                                                       for="genderMale" id="label_male">Male</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio"
                                                       name="gender" id="genderFemale" value="Female"
                                                       onchange="radioValidator(genderFemale,'new_student','gender','old_student','label_male','label_female')">
                                                <label class="form-check-label"
                                                       for="genderFemale"
                                                       id="label_female">Female</label>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- Student's photograph + Race + Religion -->
                                    <div class="row mb-4">

                                        <!-- Student's photograph -->
                                        <div class="col-4">

                                            <label for="fileStudentPhoto" class="form-label">Student's
                                                Photograph :</label>

                                            <input type="file" class="form-control" name="filePhoto"
                                                   id="fileStudentPhoto"
                                                   onchange="fileValidation(fileStudentPhoto,'new_student','photo','old_student')">
                                        </div>

                                        <!-- race -->
                                        <div class="col-4">
                                            <label for="selectRace" class="form-label">Race : <span
                                                    style="color: red;">*</span> </label>
                                            <select name="selectRace" id="selectRace"
                                                    class="form-select"
                                                    onchange="selectValidator(selectRace,'new_student','race_id','old_student')"
                                                    required>

                                            </select>
                                        </div>

                                        <!-- Religion -->
                                        <div class="col-4">
                                            <label for="selectReligion" class="form-label">Religion :
                                                <span style="color: red;">*</span> </label>
                                            <select name="selectReligion" id="selectReligion"
                                                    class="form-select"
                                                    onchange="selectValidator(selectReligion,'new_student','religion_id','old_student')"
                                                    required>

                                            </select>
                                        </div>
                                    </div>


                                    <!-- Addresses-->
                                    <div class="row mb-4">
                                        <!-- Permanent Address -->
                                        <div class="col-4">
                                            <label for="text_permanent_address"
                                                   class="form-label">Permanent
                                                Address :
                                                <span style="color: red;">*</span> </label>
                                            <textarea class="form-control" name="text_permanent_address"
                                                      id="text_permanent_address" rows="3"
                                                      onkeyup="textValidator(text_permanent_address,'^[#.0-9a-zA-Z\s,-\\\/ \n]+$','new_student','permanent_address','old_student')"
                                                      required></textarea>
                                        </div>

                                        <!-- current Address -->
                                        <div class="col-4">
                                            <label for="text_current_address" class="form-label">Current
                                                Address :
                                            </label>
                                            <textarea class="form-control" name="text_current_address"
                                                      id="text_current_address" rows="3"
                                                      onkeyup="textValidator(text_current_address,'^[#.0-9a-zA-Z\s,-\\\/ \n]+$','new_student','current_address','old_student')"></textarea>
                                        </div>

                                        <!-- Description -->
                                        <div class="col-4">
                                            <label for="textDescription" class="form-label">Description
                                                :
                                            </label>
                                            <textarea class="form-control" name="description"
                                                      id="textDescription" rows="3"
                                                      onkeyup="textValidator(textDescription,'^[#.0-9a-zA-Z\s,-\\\/ \n]+$','new_student','description','old_student')"></textarea>
                                        </div>
                                    </div>
                                </div>


                                <!-- Student status & Assigned date -->
                                <div class="row mt-5 mb-5">

                                    <!-- Student Status -->
                                    <div class="col-6">
                                        <div>
                                            <label class="form-label">Student Status :<span style="color: red;">*</span>
                                            </label>
                                        </div>
                                        <div class="input-group">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="switchStudentStatus"
                                                       onchange="checkboxValidator(switchStudentStatus,'new_student','student_status','old_student',true,false,labelStudentStatus,'The student account is active','The student account is In-active')"
                                                       required>
                                                <label for="switchStudentStatus" class="form-check-label fw-bold"
                                                       id="labelStudentStatus">The Student account is active</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!-- buttons -->
                                <div class="row mt-5" id="#formButtons">
                                    <div class="col mt-5 text-end">
                                        <button type="reset" id="resetStudent" class="btn fw-bold" style="width: 20%" onclick="">CLEAR</button>
                                        <button type ="submit" id="studentUpdate" class="btn fw-bold" style="width: 20%" onclick="updateStudent()">UPDATE</button>
                                        <button type="submit" id="studentSubmit" class="btn fw-bold" style="width: 20%" onclick="submitStudent()">SUBMIT</button>
                                    </div>
                                </div>

                            </form>
                        </div>


                        <!-- table area -->
                        <div class="tab-pane" id="table" role="tabpanel" aria-labelledby="table-tab" tabindex="0">

                            <table id="tableStudent" class="table table-hover">
                                <thead class="table-dark">
                                <tr>
                                    <th>#</th>
                                    <th>Registration No:</th>
                                    <th>Full Name</th>
                                    <th>Gender</th>
                                    <th>Guardian</th>
                                    <th>Guardian Mobile No.</th>
                                    <th>Student Status</th>
                                    <th>Modify</th>
                                </tr>
                                </thead>

                                <tbody>

                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Modal for each Student record in the table-->
    <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="modalViewStudent" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header" id="modalHeader">
                    <h5 class="modal-title" id="modalStudentTitle">Student Details</h5>
                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                </div>

                <div class="modal-body">

                    <table border="1" class="table table-striped table-hover shadow rounded" id="studentViewTable"
                           style="height:200px; width : 450px;">

                        <tr>
                            <th>Student ID.</th>
                            <td id="tdId"></td>
                        </tr>

                        <tr>
                            <th>Full Name</th>
                            <td id="tdFullName"></td>
                        </tr>

                        <tr>
                            <th>Name with Initials</th>
                            <td id="tdNameWithInitials"></td>
                        </tr>

                        <tr>
                            <th>Calling Name</th>
                            <td id="tdCallingName"></td>
                        </tr>

                        <tr>
                            <th>NIC No.</th>
                            <td id="tdNIC"></td>
                        </tr>

                        <tr>
                            <th>Date of Birth</th>
                            <td id="tdDOB"></td>
                        </tr>

                        <tr>
                            <th>Gender</th>
                            <td id="tdGender"></td>
                        </tr>

                        <tr>
                            <th>Guardian</th>
                            <td id="tdGuardian"></td>
                        </tr>

                        <tr>
                            <th>Race</th>
                            <td id="tdRace"></td>
                        </tr>

                        <tr>
                            <th>Religion</th>
                            <td id="tdReligion"></td>
                        </tr>

                        <tr>
                            <th>Permanent Address</th>
                            <td id="tdPermanentAddress"></td>
                        </tr>

                        <tr>
                            <th>Current Address</th>
                            <td id="tdCurrentAddress"></td>
                        </tr>

                        <tr>
                            <th>Description</th>
                            <td id="tdDescription"></td>
                        </tr>

                        <tr>
                            <th>Status</th>
                            <td id="tdStatus"></td>
                        </tr>

                    </table>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" onclick="printUserDetails()" type="button">Print</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>

</html>